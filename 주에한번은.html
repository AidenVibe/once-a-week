<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì£¼ì—í•œë²ˆì€</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #faf9f7;
      --bg-card: #ffffff;
      --text-primary: #2d2a26;
      --text-secondary: #6b6560;
      --text-muted: #9a958f;
      --accent: #e07b4c;
      --accent-hover: #c96a3f;
      --accent-light: #fef4f0;
      --border: #e8e4df;
      --shadow: rgba(45, 42, 38, 0.08);
      --success: #5a9a6e;
      --success-light: #f0f7f2;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Pretendard', -apple-system, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }

    .container {
      max-width: 420px;
      margin: 0 auto;
      padding: 24px 20px;
      min-height: 100vh;
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: 32px;
      padding-top: 20px;
    }

    .logo {
      font-family: 'Noto Serif KR', serif;
      font-size: 28px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
      letter-spacing: -0.5px;
    }

    .logo-icon {
      display: inline-block;
      margin-right: 8px;
      font-size: 24px;
    }

    .tagline {
      font-size: 14px;
      color: var(--text-secondary);
    }

    /* Navigation */
    .nav-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
      background: var(--bg-card);
      padding: 6px;
      border-radius: 12px;
      border: 1px solid var(--border);
    }

    .nav-tab {
      flex: 1;
      padding: 10px 16px;
      border: none;
      background: transparent;
      font-family: inherit;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-secondary);
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.2s;
    }

    .nav-tab.active {
      background: var(--accent);
      color: white;
    }

    .nav-tab:hover:not(.active) {
      background: var(--accent-light);
      color: var(--accent);
    }

    /* Cards */
    .card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 16px;
      border: 1px solid var(--border);
      box-shadow: 0 2px 8px var(--shadow);
    }

    .card-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
    }

    /* Target Selection */
    .target-buttons {
      display: flex;
      gap: 12px;
    }

    .target-btn {
      flex: 1;
      padding: 16px;
      border: 2px solid var(--border);
      background: var(--bg-card);
      border-radius: 12px;
      font-family: inherit;
      font-size: 16px;
      font-weight: 500;
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.2s;
    }

    .target-btn:hover {
      border-color: var(--accent);
      background: var(--accent-light);
    }

    .target-btn.active {
      border-color: var(--accent);
      background: var(--accent-light);
      color: var(--accent);
    }

    .target-btn-icon {
      display: block;
      font-size: 32px;
      margin-bottom: 8px;
    }

    /* Filters */
    .filter-section {
      margin-bottom: 16px;
    }

    .filter-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      margin-bottom: 8px;
      display: block;
    }

    .filter-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .filter-chip {
      padding: 8px 14px;
      border: 1px solid var(--border);
      background: var(--bg-card);
      border-radius: 20px;
      font-family: inherit;
      font-size: 13px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s;
    }

    .filter-chip:hover {
      border-color: var(--accent);
    }

    .filter-chip.active {
      border-color: var(--accent);
      background: var(--accent-light);
      color: var(--accent);
    }

    /* Question Display */
    .question-area {
      text-align: center;
      padding: 40px 20px;
      min-height: 200px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .question-text {
      font-family: 'Noto Serif KR', serif;
      font-size: 22px;
      font-weight: 400;
      line-height: 1.7;
      color: var(--text-primary);
      word-break: keep-all;
    }

    .question-meta {
      margin-top: 16px;
      display: flex;
      gap: 8px;
      justify-content: center;
    }

    .question-tag {
      font-size: 11px;
      padding: 4px 10px;
      background: var(--bg-primary);
      border-radius: 12px;
      color: var(--text-muted);
    }

    .empty-state {
      color: var(--text-muted);
      font-size: 15px;
    }

    /* Action Buttons */
    .action-buttons {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .btn {
      flex: 1;
      padding: 14px 20px;
      border: none;
      border-radius: 12px;
      font-family: inherit;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
    }

    .btn-primary:hover {
      background: var(--accent-hover);
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: var(--bg-primary);
      color: var(--text-secondary);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: var(--border);
    }

    .btn-success {
      background: var(--success);
      color: white;
    }

    .btn-success:hover {
      background: #4a8a5e;
    }

    .btn-sent {
      background: var(--success-light);
      color: var(--success);
      border: 1px solid var(--success);
    }

    /* Question List (Management) */
    .question-list {
      max-height: 60vh;
      overflow-y: auto;
    }

    .question-item {
      padding: 16px;
      border-bottom: 1px solid var(--border);
      transition: background 0.2s;
    }

    .question-item:last-child {
      border-bottom: none;
    }

    .question-item:hover {
      background: var(--bg-primary);
    }

    .question-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .question-item-tags {
      display: flex;
      gap: 6px;
    }

    .question-item-text {
      font-size: 15px;
      color: var(--text-primary);
      line-height: 1.5;
    }

    .question-item-text.sent {
      color: var(--text-muted);
      text-decoration: line-through;
    }

    .question-item-actions {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .btn-small {
      padding: 6px 12px;
      font-size: 12px;
      border-radius: 6px;
    }

    /* Edit Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 24px;
      width: 100%;
      max-width: 400px;
      transform: translateY(20px);
      transition: transform 0.2s;
    }

    .modal-overlay.active .modal {
      transform: translateY(0);
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .modal-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-family: inherit;
      font-size: 15px;
      resize: vertical;
      min-height: 100px;
      margin-bottom: 16px;
    }

    .modal-input:focus {
      outline: none;
      border-color: var(--accent);
    }

    .modal-buttons {
      display: flex;
      gap: 12px;
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--text-primary);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      z-index: 200;
      transition: transform 0.3s;
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
    }

    /* Stats */
    .stats {
      display: flex;
      justify-content: center;
      gap: 24px;
      padding: 16px;
      background: var(--bg-primary);
      border-radius: 12px;
      margin-bottom: 16px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 700;
      color: var(--accent);
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* Page visibility */
    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    /* Responsive */
    @media (max-width: 380px) {
      .question-text {
        font-size: 19px;
      }

      .target-btn-icon {
        font-size: 28px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1 class="logo"><span class="logo-icon">ğŸ¦</span>ì£¼ì—í•œë²ˆì€</h1>
      <p class="tagline">ë¶€ëª¨ë‹˜ê³¼ì˜ ëŒ€í™”ë¥¼ ë” ê¹Šê²Œ</p>
    </header>

    <!-- Navigation -->
    <nav class="nav-tabs">
      <button class="nav-tab active" data-page="main">ì§ˆë¬¸ ë½‘ê¸°</button>
      <button class="nav-tab" data-page="manage">ì§ˆë¬¸ ê´€ë¦¬</button>
    </nav>

    <!-- Main Page -->
    <div id="page-main" class="page active">
      <!-- Target Selection -->
      <div class="card">
        <h2 class="card-title">ëˆ„êµ¬ì—ê²Œ ë³´ë‚¼ê¹Œìš”?</h2>
        <div class="target-buttons">
          <button class="target-btn active" data-target="ì—„ë§ˆ">
            <span class="target-btn-icon">ğŸ‘©</span>
            ì—„ë§ˆ
          </button>
          <button class="target-btn" data-target="ì•„ë¹ ">
            <span class="target-btn-icon">ğŸ‘¨</span>
            ì•„ë¹ 
          </button>
        </div>
      </div>

      <!-- Filters -->
      <div class="card">
        <div class="filter-section">
          <label class="filter-label">ì¹´í…Œê³ ë¦¬</label>
          <div class="filter-chips">
            <button class="filter-chip active" data-category="all">ì „ì²´</button>
            <button class="filter-chip" data-category="past">ê³¼ê±°</button>
            <button class="filter-chip" data-category="present">í˜„ì¬</button>
            <button class="filter-chip" data-category="future">ë¯¸ë˜</button>
          </div>
        </div>
        <div class="filter-section">
          <label class="filter-label">ë‚œì´ë„</label>
          <div class="filter-chips">
            <button class="filter-chip active" data-difficulty="all">ì „ì²´</button>
            <button class="filter-chip" data-difficulty="1">ê°€ë²¼ì›€</button>
            <button class="filter-chip" data-difficulty="2">ì¤‘ê°„</button>
            <button class="filter-chip" data-difficulty="3">ê¹ŠìŒ</button>
          </div>
        </div>
      </div>

      <!-- Question Display -->
      <div class="card">
        <div class="question-area" id="questionArea">
          <p class="empty-state">ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬<br>ì˜¤ëŠ˜ì˜ ì§ˆë¬¸ì„ ë½‘ì•„ë³´ì„¸ìš”</p>
        </div>
        <div class="action-buttons">
          <button class="btn btn-primary" id="drawBtn">
            <span>âœ¨</span> ì§ˆë¬¸ ë½‘ê¸°
          </button>
        </div>
        <div class="action-buttons" id="questionActions" style="display: none;">
          <button class="btn btn-secondary" id="redrawBtn">
            <span>ğŸ”„</span> ë‹¤ì‹œ ë½‘ê¸°
          </button>
          <button class="btn btn-primary" id="copyBtn">
            <span>ğŸ“‹</span> ë³µì‚¬
          </button>
        </div>
        <div class="action-buttons" id="sentAction" style="display: none;">
          <button class="btn btn-success" id="sentBtn">
            <span>âœ“</span> ë³´ëƒˆì–´ìš”
          </button>
        </div>
      </div>
    </div>

    <!-- Manage Page -->
    <div id="page-manage" class="page">
      <div class="card">
        <div class="stats">
          <div class="stat">
            <div class="stat-value" id="totalCount">0</div>
            <div class="stat-label">ì „ì²´ ì§ˆë¬¸</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="sentCount">0</div>
            <div class="stat-label">ë³´ë‚¸ ì§ˆë¬¸</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="remainCount">0</div>
            <div class="stat-label">ë‚¨ì€ ì§ˆë¬¸</div>
          </div>
        </div>
      </div>

      <div class="card" style="padding: 0;">
        <div class="question-list" id="questionList">
          <!-- Questions will be rendered here -->
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div class="modal-overlay" id="editModal">
    <div class="modal">
      <h3 class="modal-title">ì§ˆë¬¸ ìˆ˜ì •</h3>
      <textarea class="modal-input" id="editInput" placeholder="ì§ˆë¬¸ì„ ìˆ˜ì •í•˜ì„¸ìš”..."></textarea>
      <div class="modal-buttons">
        <button class="btn btn-secondary" id="cancelEdit">ì·¨ì†Œ</button>
        <button class="btn btn-primary" id="saveEdit">ì €ì¥</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    // ì§ˆë¬¸ ë°ì´í„°ë² ì´ìŠ¤
    const defaultQuestions = [
      // ê³¼ê±° - ê°€ë²¼ì›€
      { id: 1, text: "ë‚´ê°€ ì–´ë ¸ì„ ë•Œ ê°€ì¥ ì›ƒê²¼ë˜ ìˆœê°„ì€ ë­ì•¼?", category: "past", difficulty: 1 },
      { id: 2, text: "ë‚´ê°€ ì–´ë ¸ì„ ë•Œ ê°€ì¥ ì¢‹ì•„í–ˆë˜ ìŒì‹ì€ ë­ì˜€ì–´?", category: "past", difficulty: 1 },
      { id: 3, text: "ë‚´ê°€ ì–´ë ¸ì„ ë•Œ ì…ë²„ë¦‡ì²˜ëŸ¼ í•˜ë˜ ë§ ìˆì—ˆì–´?", category: "past", difficulty: 1 },
      { id: 4, text: "ë‚´ê°€ ì–´ë ¸ì„ ë•Œ ê°€ì¥ ì¢‹ì•„í–ˆë˜ ì¥ë‚œê°ì€ ë­ì˜€ì–´?", category: "past", difficulty: 1 },
      { id: 5, text: "ë‚´ê°€ ì²˜ìŒ ê±¸ì—ˆì„ ë•Œ ê¸°ì–µë‚˜?", category: "past", difficulty: 1 },
      { id: 6, text: "ë‚´ ì´ë¦„ ì§€ì„ ë•Œ ë‹¤ë¥¸ í›„ë³´ë„ ìˆì—ˆì–´?", category: "past", difficulty: 1 },
      { id: 7, text: "ë‚´ê°€ ì–´ë ¸ì„ ë•Œ ì œì¼ ë¬´ì„œì›Œí–ˆë˜ ê²Œ ë­ì•¼?", category: "past", difficulty: 1 },

      // ê³¼ê±° - ì¤‘ê°„
      { id: 8, text: "ë‚˜í•œí…Œ ì²˜ìŒ ìì „ê±° ê°€ë¥´ì³ì¤¬ì„ ë•Œ ê¸°ì–µë‚˜?", category: "past", difficulty: 2 },
      { id: 9, text: "ë‚´ê°€ í•™êµ ë‹¤ë‹ ë•Œ ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ì—í”¼ì†Œë“œëŠ” ë­ì•¼?", category: "past", difficulty: 2 },
      { id: 10, text: "ë‚˜ í‚¤ìš°ë©´ì„œ ê°€ì¥ ë¿Œë“¯í–ˆë˜ ìˆœê°„ì€ ì–¸ì œì•¼?", category: "past", difficulty: 2 },
      { id: 11, text: "ìš°ë¦¬ ê°€ì¡± ì—¬í–‰ ì¤‘ì— ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ê±´ ë­ì•¼?", category: "past", difficulty: 2 },
      { id: 12, text: "ë‚´ê°€ ì–´ë ¸ì„ ë•Œ ì¹œêµ¬ë“¤ì´ë‘ ì–´ë–»ê²Œ ë†€ì•˜ì–´?", category: "past", difficulty: 2 },
      { id: 13, text: "ì–´ë ¸ì„ ë•Œ ë‚´ê°€ ì œì¼ ì‚¬ê³  ì‹¶ì–´í–ˆë˜ ê±° ê¸°ì–µë‚˜?", category: "past", difficulty: 2 },
      { id: 14, text: "ë‚˜ í‚¤ìš¸ ë•Œ ì œì¼ ì‹ ê¸°í–ˆë˜ ìˆœê°„ì´ ìˆì—ˆì–´?", category: "past", difficulty: 2 },
      { id: 15, text: "ë‚´ê°€ ì²˜ìŒ 'ì‚¬ë‘í•´'ë¼ê³  ë§í–ˆì„ ë•Œ ê¸°ì–µë‚˜?", category: "past", difficulty: 2 },

      // ê³¼ê±° - ê¹ŠìŒ
      { id: 16, text: "ë‚˜ í‚¤ìš°ë©´ì„œ ê°€ì¥ í˜ë“¤ì—ˆë˜ ìˆœê°„ì€ ì–¸ì œì•¼?", category: "past", difficulty: 3 },
      { id: 17, text: "ì Šì—ˆì„ ë•Œ ì´ë£¨ê³  ì‹¶ì—ˆë˜ ê¿ˆì´ ìˆì—ˆì–´?", category: "past", difficulty: 3 },
      { id: 18, text: "ë‚˜í•œí…Œ ë¬¼ë ¤ì£¼ê³  ì‹¶ì€ ìš°ë¦¬ ì§‘ì•ˆì˜ ê°€ì¹˜ê´€ì´ ìˆì–´?", category: "past", difficulty: 3 },
      { id: 19, text: "ì‚´ë©´ì„œ ê°€ì¥ í›„íšŒë˜ëŠ” ê²°ì •ì´ ìˆì–´?", category: "past", difficulty: 3 },
      { id: 20, text: "ë‚˜ ë‚³ê³  ì²˜ìŒ ì•ˆì•˜ì„ ë•Œ ë¬´ìŠ¨ ìƒê° í–ˆì–´?", category: "past", difficulty: 3 },
      { id: 21, text: "ì¸ìƒì—ì„œ ê°€ì¥ í–‰ë³µí–ˆë˜ ì‹œê¸°ëŠ” ì–¸ì œì•¼?", category: "past", difficulty: 3 },
      { id: 22, text: "ì§€ê¸ˆ ë‹¤ì‹œ 20ëŒ€ë¡œ ëŒì•„ê°„ë‹¤ë©´ ë­˜ í•˜ê³  ì‹¶ì–´?", category: "past", difficulty: 3 },

      // í˜„ì¬ - ê°€ë²¼ì›€
      { id: 23, text: "ìš”ì¦˜ ê°€ì¥ ë§›ìˆê²Œ ë¨¹ì€ ìŒì‹ì€ ë­ì•¼?", category: "present", difficulty: 1 },
      { id: 24, text: "ìš”ì¦˜ í•˜ë£¨ ì¤‘ ê°€ì¥ ì¢‹ì€ ì‹œê°„ì€ ì–¸ì œì•¼?", category: "present", difficulty: 1 },
      { id: 25, text: "ìš”ì¦˜ ê°€ì¥ ì¬ë°Œê²Œ ë³´ëŠ” TV í”„ë¡œê·¸ë¨ ë­ì•¼?", category: "present", difficulty: 1 },
      { id: 26, text: "ìš”ì¦˜ ê±´ê°•ì€ ì–´ë•Œ? ë¶ˆí¸í•œ ë° ì—†ì–´?", category: "present", difficulty: 1 },
      { id: 27, text: "ìš”ì¦˜ ë‚ ì”¨ ì–´ë•Œ? ì¶¥ì§€ ì•Šì•„?", category: "present", difficulty: 1 },
      { id: 28, text: "ìš”ì¦˜ ë­ í•˜ë©´ì„œ ì‹œê°„ ë³´ë‚´?", category: "present", difficulty: 1 },
      { id: 29, text: "ìš”ì¦˜ ì ì€ ì˜ ì?", category: "present", difficulty: 1 },
      { id: 30, text: "ìš”ì¦˜ ì œì¼ ìì£¼ ë¨¹ëŠ” ìŒì‹ì€ ë­ì•¼?", category: "present", difficulty: 1 },

      // í˜„ì¬ - ì¤‘ê°„
      { id: 31, text: "ìš”ì¦˜ ìì£¼ ìƒê°ë‚˜ëŠ” ì‚¬ëŒ ìˆì–´?", category: "present", difficulty: 2 },
      { id: 32, text: "ìš”ì¦˜ ìƒˆë¡œ ì‹œì‘í•œ ì·¨ë¯¸ë‚˜ ê´€ì‹¬ì‚¬ ìˆì–´?", category: "present", difficulty: 2 },
      { id: 33, text: "ìš”ì¦˜ ë‚˜í•œí…Œ í•˜ê³  ì‹¶ì€ ë§ ìˆì–´?", category: "present", difficulty: 2 },
      { id: 34, text: "ìš”ì¦˜ ê³ ë¯¼ ìˆìœ¼ë©´ ë§í•´ì¤˜, ë‚´ê°€ ë„ì™€ì¤„ê²Œ", category: "present", difficulty: 2 },
      { id: 35, text: "ìš”ì¦˜ ì œì¼ ì¦ê±°ìš¸ ë•Œê°€ ì–¸ì œì•¼?", category: "present", difficulty: 2 },
      { id: 36, text: "ìš”ì¦˜ ê°€ì¥ ë³´ê³  ì‹¶ì€ ì‚¬ëŒì´ ëˆ„êµ¬ì•¼?", category: "present", difficulty: 2 },
      { id: 37, text: "ìš”ì¦˜ ì½ê³  ìˆëŠ” ì±…ì´ë‚˜ ê¸°ì‚¬ ìˆì–´?", category: "present", difficulty: 2 },

      // í˜„ì¬ - ê¹ŠìŒ
      { id: 38, text: "ìš”ì¦˜ ì‚¶ì—ì„œ ê°€ì¥ ê°ì‚¬í•œ ê±´ ë­ì•¼?", category: "present", difficulty: 3 },
      { id: 39, text: "ìš”ì¦˜ ë‚˜ì— ëŒ€í•´ ê±±ì •ë˜ëŠ” ê±° ìˆì–´?", category: "present", difficulty: 3 },
      { id: 40, text: "ìš”ì¦˜ ê°€ì¥ ë§ˆìŒì´ í¸ì•ˆí•  ë•ŒëŠ” ì–¸ì œì•¼?", category: "present", difficulty: 3 },
      { id: 41, text: "ìš”ì¦˜ ë‚˜í•œí…Œ ì„œìš´í•œ ê±° ìˆìœ¼ë©´ ë§í•´ì¤˜", category: "present", difficulty: 3 },

      // ë¯¸ë˜ - ê°€ë²¼ì›€
      { id: 42, text: "ê°™ì´ ê°€ë³´ê³  ì‹¶ì€ ê³³ ìˆì–´?", category: "future", difficulty: 1 },
      { id: 43, text: "ë‚´ê°€ í•´ë“œë¦¬ë©´ ì¢‹ê² ëŠ” ê±° ìˆì–´?", category: "future", difficulty: 1 },
      { id: 44, text: "ë¨¹ì–´ë³´ê³  ì‹¶ì€ ìŒì‹ ìˆì–´? ë‚´ê°€ ì‚¬ë“œë¦´ê²Œ", category: "future", difficulty: 1 },

      // ë¯¸ë˜ - ì¤‘ê°„
      { id: 45, text: "ì•ìœ¼ë¡œ ê¼­ í•´ë³´ê³  ì‹¶ì€ ê±° ìˆì–´?", category: "future", difficulty: 2 },
      { id: 46, text: "ê°™ì´ í•´ë³´ê³  ì‹¶ì€ í™œë™ì´ ìˆì–´?", category: "future", difficulty: 2 },
      { id: 47, text: "ë°°ì›Œë³´ê³  ì‹¶ì—ˆë˜ ê²Œ ìˆì–´?", category: "future", difficulty: 2 },
      { id: 48, text: "ì–¸ì  ê°€ ê¼­ ê°€ë³´ê³  ì‹¶ì€ ë‚˜ë¼ê°€ ìˆì–´?", category: "future", difficulty: 2 },
      { id: 49, text: "ì˜¬í•´ ì•ˆì— ê¼­ í•˜ê³  ì‹¶ì€ ê±° ìˆì–´?", category: "future", difficulty: 2 },

      // ë¯¸ë˜ - ê¹ŠìŒ
      { id: 50, text: "ë‚˜í•œí…Œ ê¼­ í•´ì£¼ê³  ì‹¶ì€ ë§ì´ ìˆì–´?", category: "future", difficulty: 3 },
      { id: 51, text: "ë‚´ê°€ ì–´ë–¤ ì‚¬ëŒì´ ëìœ¼ë©´ ì¢‹ê² ì–´?", category: "future", difficulty: 3 },
      { id: 52, text: "ë‚˜ì¤‘ì— ì†ì£¼ê°€ ìƒê¸°ë©´ ì–´ë–¤ í• ë¨¸ë‹ˆ/í• ì•„ë²„ì§€ê°€ ë˜ê³  ì‹¶ì–´?", category: "future", difficulty: 3 },
      { id: 53, text: "ë‚˜í•œí…Œ ê¼­ ì „í•´ì£¼ê³  ì‹¶ì€ ì¸ìƒ êµí›ˆì´ ìˆì–´?", category: "future", difficulty: 3 },
      { id: 54, text: "ìš°ë¦¬ ê°€ì¡±ì´ ì•ìœ¼ë¡œ ì–´ë–»ê²Œ ëìœ¼ë©´ ì¢‹ê² ì–´?", category: "future", difficulty: 3 },
      { id: 55, text: "ë‚´ê°€ ë‚˜ì¤‘ì— ë¶€ëª¨ê°€ ë˜ë©´ ì–´ë–¤ ì¡°ì–¸ì„ í•´ì£¼ê³  ì‹¶ì–´?", category: "future", difficulty: 3 },
    ];

    // State
    let state = {
      target: 'ì—„ë§ˆ',
      category: 'all',
      difficulty: 'all',
      currentQuestion: null,
      questions: [],
      sentQuestions: []
    };

    // DOM Elements
    const questionArea = document.getElementById('questionArea');
    const drawBtn = document.getElementById('drawBtn');
    const questionActions = document.getElementById('questionActions');
    const sentAction = document.getElementById('sentAction');
    const redrawBtn = document.getElementById('redrawBtn');
    const copyBtn = document.getElementById('copyBtn');
    const sentBtn = document.getElementById('sentBtn');
    const questionList = document.getElementById('questionList');
    const editModal = document.getElementById('editModal');
    const editInput = document.getElementById('editInput');
    const toast = document.getElementById('toast');

    // Initialize
    function init() {
      loadData();
      setupEventListeners();
      updateStats();
    }

    // Load data from localStorage
    function loadData() {
      const savedQuestions = localStorage.getItem('questions');
      const savedSent = localStorage.getItem('sentQuestions');

      if (savedQuestions) {
        state.questions = JSON.parse(savedQuestions);
      } else {
        state.questions = JSON.parse(JSON.stringify(defaultQuestions));
        saveData();
      }

      if (savedSent) {
        state.sentQuestions = JSON.parse(savedSent);
      }
    }

    // Save data to localStorage
    function saveData() {
      localStorage.setItem('questions', JSON.stringify(state.questions));
      localStorage.setItem('sentQuestions', JSON.stringify(state.sentQuestions));
    }

    // Setup event listeners
    function setupEventListeners() {
      // Navigation
      document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');

          document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
          document.getElementById(`page-${tab.dataset.page}`).classList.add('active');

          if (tab.dataset.page === 'manage') {
            renderQuestionList();
          }
        });
      });

      // Target selection
      document.querySelectorAll('.target-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.target-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          state.target = btn.dataset.target;
        });
      });

      // Category filter
      document.querySelectorAll('[data-category]').forEach(chip => {
        chip.addEventListener('click', () => {
          document.querySelectorAll('[data-category]').forEach(c => c.classList.remove('active'));
          chip.classList.add('active');
          state.category = chip.dataset.category;
        });
      });

      // Difficulty filter
      document.querySelectorAll('[data-difficulty]').forEach(chip => {
        chip.addEventListener('click', () => {
          document.querySelectorAll('[data-difficulty]').forEach(c => c.classList.remove('active'));
          chip.classList.add('active');
          state.difficulty = chip.dataset.difficulty;
        });
      });

      // Draw button
      drawBtn.addEventListener('click', drawQuestion);
      redrawBtn.addEventListener('click', drawQuestion);

      // Copy button
      copyBtn.addEventListener('click', copyQuestion);

      // Sent button
      sentBtn.addEventListener('click', markAsSent);

      // Modal
      document.getElementById('cancelEdit').addEventListener('click', closeModal);
      document.getElementById('saveEdit').addEventListener('click', saveEdit);
      editModal.addEventListener('click', (e) => {
        if (e.target === editModal) closeModal();
      });
    }

    // Draw a random question
    function drawQuestion() {
      let filtered = state.questions.filter(q => !state.sentQuestions.includes(q.id));

      if (state.category !== 'all') {
        filtered = filtered.filter(q => q.category === state.category);
      }

      if (state.difficulty !== 'all') {
        filtered = filtered.filter(q => q.difficulty === parseInt(state.difficulty));
      }

      if (filtered.length === 0) {
        questionArea.innerHTML = `<p class="empty-state">ì¡°ê±´ì— ë§ëŠ” ì§ˆë¬¸ì´ ì—†ì–´ìš”.<br>í•„í„°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ë³´ë‚¸ ì§ˆë¬¸ì„ ì´ˆê¸°í™”í•´ë³´ì„¸ìš”.</p>`;
        drawBtn.style.display = 'flex';
        questionActions.style.display = 'none';
        sentAction.style.display = 'none';
        return;
      }

      const randomIndex = Math.floor(Math.random() * filtered.length);
      state.currentQuestion = filtered[randomIndex];

      const categoryLabels = { past: 'ê³¼ê±°', present: 'í˜„ì¬', future: 'ë¯¸ë˜' };
      const difficultyLabels = { 1: 'ê°€ë²¼ì›€', 2: 'ì¤‘ê°„', 3: 'ê¹ŠìŒ' };

      questionArea.innerHTML = `
        <p class="question-text">"${state.currentQuestion.text.replace('ì—„ë§ˆ', state.target).replace('ì•„ë¹ ', state.target)}"</p>
        <div class="question-meta">
          <span class="question-tag">${categoryLabels[state.currentQuestion.category]}</span>
          <span class="question-tag">${difficultyLabels[state.currentQuestion.difficulty]}</span>
        </div>
      `;

      drawBtn.style.display = 'none';
      questionActions.style.display = 'flex';
      sentAction.style.display = 'flex';
    }

    // Copy question to clipboard
    function copyQuestion() {
      if (!state.currentQuestion) return;

      const text = state.currentQuestion.text.replace('ì—„ë§ˆ', state.target).replace('ì•„ë¹ ', state.target);
      navigator.clipboard.writeText(text).then(() => {
        showToast('ì§ˆë¬¸ì´ ë³µì‚¬ë˜ì—ˆì–´ìš”!');
      });
    }

    // Mark question as sent
    function markAsSent() {
      if (!state.currentQuestion) return;

      if (!state.sentQuestions.includes(state.currentQuestion.id)) {
        state.sentQuestions.push(state.currentQuestion.id);
        saveData();
        updateStats();
      }

      sentBtn.innerHTML = '<span>âœ“</span> ë³´ëƒˆì–´ìš”!';
      sentBtn.classList.remove('btn-success');
      sentBtn.classList.add('btn-sent');
      sentBtn.disabled = true;

      showToast(`${state.target}ì—ê²Œ ì§ˆë¬¸ì„ ë³´ëƒˆì–´ìš”! ğŸ’•`);
    }

    // Render question list for management
    function renderQuestionList() {
      const categoryLabels = { past: 'ê³¼ê±°', present: 'í˜„ì¬', future: 'ë¯¸ë˜' };
      const difficultyLabels = { 1: 'ê°€ë²¼ì›€', 2: 'ì¤‘ê°„', 3: 'ê¹ŠìŒ' };

      questionList.innerHTML = state.questions.map(q => `
        <div class="question-item">
          <div class="question-item-header">
            <div class="question-item-tags">
              <span class="question-tag">${categoryLabels[q.category]}</span>
              <span class="question-tag">${difficultyLabels[q.difficulty]}</span>
            </div>
          </div>
          <p class="question-item-text ${state.sentQuestions.includes(q.id) ? 'sent' : ''}">${q.text}</p>
          <div class="question-item-actions">
            <button class="btn btn-secondary btn-small" onclick="openEditModal(${q.id})">ìˆ˜ì •</button>
            ${state.sentQuestions.includes(q.id)
              ? `<button class="btn btn-secondary btn-small" onclick="unmarkSent(${q.id})">ë‹¤ì‹œ ì‚¬ìš©</button>`
              : ''}
          </div>
        </div>
      `).join('');

      updateStats();
    }

    // Update statistics
    function updateStats() {
      document.getElementById('totalCount').textContent = state.questions.length;
      document.getElementById('sentCount').textContent = state.sentQuestions.length;
      document.getElementById('remainCount').textContent = state.questions.length - state.sentQuestions.length;
    }

    // Open edit modal
    let editingId = null;
    window.openEditModal = function(id) {
      editingId = id;
      const question = state.questions.find(q => q.id === id);
      editInput.value = question.text;
      editModal.classList.add('active');
    }

    // Close modal
    function closeModal() {
      editModal.classList.remove('active');
      editingId = null;
    }

    // Save edit
    function saveEdit() {
      if (editingId === null) return;

      const question = state.questions.find(q => q.id === editingId);
      question.text = editInput.value;
      saveData();
      renderQuestionList();
      closeModal();
      showToast('ì§ˆë¬¸ì´ ìˆ˜ì •ë˜ì—ˆì–´ìš”!');
    }

    // Unmark as sent
    window.unmarkSent = function(id) {
      state.sentQuestions = state.sentQuestions.filter(qId => qId !== id);
      saveData();
      renderQuestionList();
      showToast('ì§ˆë¬¸ì„ ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”!');
    }

    // Show toast
    function showToast(message) {
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2500);
    }

    // Reset sent button state when drawing new question
    function resetSentButton() {
      sentBtn.innerHTML = '<span>âœ“</span> ë³´ëƒˆì–´ìš”';
      sentBtn.classList.add('btn-success');
      sentBtn.classList.remove('btn-sent');
      sentBtn.disabled = false;
    }

    // Override drawQuestion to reset sent button
    const originalDrawQuestion = drawQuestion;
    drawQuestion = function() {
      resetSentButton();
      originalDrawQuestion();
    }

    // Start
    init();
  </script>
</body>
</html>
